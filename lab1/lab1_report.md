University: [ITMO University](https://itmo.ru/ru/)
Faculty: [FICT](https://fict.itmo.ru)
Course: [Network programming](https://github.com/itmo-ict-faculty/network-programming)
Year: 2022/2023
Group: K34212
Author: Leshkov Roman Sergeevich
Lab: Lab1
Date of create: 20.09.2022
Date of finished: 

Цель работы: 
Целью данной работы является развертывание виртуальной машины в облачном сервисе с установленной системой контроля конфигураций Ansible и установка CHR в VirtualBox

Ход работы:
1. Разворачивание сервера

  В качестве облачного провайдера выбран YandexCloud. После регистрации на домашней странице(консоль) перейти на вкладку **Compute Cloud**, далее при нажатии кнопки **Создать ВМ** откроется меню создания виртуальной машины, в котором необходимо задать *имя, образ системы, файловое хранилище, вычислительные ресурсы и SSH-ключ*, и после нажать кнопку **Создать ВМ**. 
  В лабораторной работе были заданы следующие параметры: 
  - имя - ubuntu-leshkov
  - образ системы - Ubuntu22.04
  - файловое хранилище - 15 ГБ
  - вычислительные ресурсы
    - платформа - Intel Ice Lake
    - гарантированная доля vCPU - 20%
    - vCPU - 2
    - RAM - 1 ГБ
    
  Для генерации SSH-ключа в cmd.exe или powershell.exe ввести:
  
      ssh-keygen -t ed25519
      
  После указания имени файлов и пароля закрытого ключа в папке *C:\Users\<имя_пользователя>\.ssh\** будут сохраненены два файла - файл закрытого ключа без расширения и файл открытого ключа с расширением *.pub*. В облачном сервисе указывается содержимое файла открытого ключа в одну строку.
  
  После запуска машины в облаке для подключения к ней необходимо запомнить выданный ей публичный IP-адрес, посмотреть его можно в вкладке *Compute Cloud/Виртуальные машины/<имя машины>/Обзор/Сеть*. В cmd.exe или powershell.exe вводится команда:
  
      ssh <имя_пользователя>@<публичный_IP-адрес_виртуальной_машины>
      
  После ввода команды и последующего ввода пароля происходит подключение.
  
  Для дальнейшего выполнения лабораторной необходимо установить Ansible и желательно обновить ПО, для этого в терминале вводятся команды:
  
      sudo apt update & sudo apt upgrade
      sudo do-release-upgrade
      sudo apt install python3-pip
      sudo pip3 install ansible
      ansible --version
      
  Теперь приготовления к настройке завершены.
  
2. Установка RouterOS в VirtualBox

  Образ RouterOS скачивается с сайта https://mikrotik.com/download из раздела **Cloud Hosted Router** в формате **vdi**. В VirtualBox при создании машины указывается тип - Other, версия Other/Unknown (64-bit), а в качестве хранилища указывается ранее скаченный файл в формате *.vdi*. В настройке ВМ в одном из адаптеров указывается тип подключения: *Сетевой мост*, тип адаптера *Intel PRO/1000 MT Desktop (82540EM)*, неразборчивый режим - *Разрешить всё* и обновляется MAC-адрес.
  
  После запуска в качестве логина вводится *admin* и задается новый пароль. На этом предварительная настройка RouterOS завершена.
  
3. Настройка OpenVPN на сервере



6. Настройка OpenVPN на клиенте

Вывод:
